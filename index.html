<!DOCTYPE html>
<html>
<head>
  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WR5J4PCT');</script>
<!-- End Google Tag Manager -->
  <title>Demo E-Commerce Store</title>
  <!-- GTM script goes here -->
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WR5J4PCT"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <h1>Welcome to My Demo Store</h1>

  <!-- Promo Banner -->
  <a id="promoBanner" href="product.html">ðŸ”¥ Special Offer - Shop Now!</a>
  <br><br>

  <!-- Promo Video -->
  <video id="promoVideo1" width="320" height="240" controls>
    <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <!-- First video -->
<video id="promoVideo2" width="400" controls>
  <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
  Your browser does not support HTML video.
</video>

<!-- Second video -->
<video id="promoVideo3" width="400" controls>
  <source src="https://www.w3schools.com/html/movie.mp4" type="video/mp4">
  Your browser does not support HTML video.
</video>
  
<!-- <script>
  //JS for video tracking
  var video = document.querySelector('#promoVideo');

if (video) {
  // Track play
  video.addEventListener('play', function() {
    dataLayer.push({
      event: "video_play",
      video_id: "promoVideo"
    });
  });

  // Track progress milestones (25%, 50%, 75%)
  var milestones = [25, 50, 75];
var milestonesTracked = {}; // keeps track of what we already fired

video.addEventListener('timeupdate', function() {
  var percentPlayed = Math.floor((video.currentTime / video.duration) * 100);

  milestones.forEach(function(m) {
    if (percentPlayed >= m && !milestonesTracked[m]) {
      dataLayer.push({
        event: "video_progress",
        video_id: "promoVideo",
        progress: m
      });
      milestonesTracked[m] = true; // mark it done âœ…
    }
  });
});

  // Track complete
  video.addEventListener('ended', function() {
    dataLayer.push({
      event: "video_complete",
      video_id: "promoVideo"
    });
  });
}
  
</script> -->

  <script>
  //JS for video tracking
    
  var videos = document.querySelectorAll('video');
  videos.forEach(function(video,index)
                 {
                   var videoID = video.id || "video_" + (index + 1);


  // Track play
                   var hasplayed = false;
  video.addEventListener('play', function() {
    if(!hasplayed){
    dataLayer.push({
      event: "video_play",
      video_id: videoID
    });
      hasplayed = true;
    }
    else{dataLayer.push({
      event: "video_play",
      video_id: videoID
    });}
  });

  // Track progress milestones (25%, 50%, 75%)
  var milestones = [25, 50, 75];
var milestonesTracked = {}; // keeps track of what we already fired

video.addEventListener('timeupdate', function() {
  var percentPlayed = Math.floor((video.currentTime / video.duration) * 100);

  milestones.forEach(function(m) {
    if (percentPlayed >= m && !milestonesTracked[m]) {
      dataLayer.push({
        event: "video_progress",
        video_id: videoID,
        progress: m
      });
      milestonesTracked[m] = true; // mark it done 
    }
  });
});

  // Track complete
  video.addEventListener('ended', function() {
    dataLayer.push({
      event: "video_complete",
      video_id: videoID
    });
  });

                 });
  
</script>
  
</body>
</html>
